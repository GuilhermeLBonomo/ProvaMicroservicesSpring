CREATE DATABASE pagamento;
USE pagamento;

CREATE TABLE TipoPagamento (
  `idTipoPagamento` INT NOT NULL,
  `metodoPagamento` VARCHAR(45) NOT NULL,
  `status` INT NOT NULL,
  PRIMARY KEY (`idTipoPagamento`),
  UNIQUE INDEX `id_UNIQUE` (`idTipoPagamento`),
  UNIQUE INDEX `metodoPagamento_UNIQUE` (`metodoPagamento`)
) ENGINE = InnoDB;

CREATE TABLE Usuario (
  `idUsuario` INT NOT NULL AUTO_INCREMENT,
  `cpf` CHAR(11) NOT NULL,
  `nome` VARCHAR(45) NOT NULL,
  `email` VARCHAR(45) NOT NULL,
  `status` INT NOT NULL,
  PRIMARY KEY (`idUsuario`),
  UNIQUE INDEX `idUsuario_UNIQUE` (`idUsuario`),
  UNIQUE INDEX `cpf_UNIQUE` (`cpf`),
  UNIQUE INDEX `email_UNIQUE` (`email`)
) ENGINE = InnoDB;

CREATE TABLE notaFiscal (
  `idNotaFiscal` INT NOT NULL AUTO_INCREMENT,
  `usuarioId` INT NOT NULL,  -- Alterado para INT
  `status` INT NOT NULL,
  `valorTotalCent` INT UNSIGNED NOT NULL,
  `TipoPagamento_idTipoPagamento` INT NOT NULL,
  `idProduto` INT NOT NULL,
  PRIMARY KEY (`idNotaFiscal`),
  UNIQUE INDEX `idNotaFiscal_UNIQUE` (`idNotaFiscal`),
  INDEX `fk_notaFiscal_Usuario_idx` (`usuarioId`),  -- Alterado para notaFiscal
  INDEX `fk_notaFiscal_TipoPagamento1_idx` (`TipoPagamento_idTipoPagamento`),  -- Alterado para notaFiscal
  CONSTRAINT `fk_notaFiscal_Usuario`
    FOREIGN KEY (`usuarioId`)
    REFERENCES pagamento.Usuario (`idUsuario`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_notaFiscal_TipoPagamento1`
    FOREIGN KEY (`TipoPagamento_idTipoPagamento`)
    REFERENCES pagamento.TipoPagamento (`idTipoPagamento`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
) ENGINE = InnoDB;
